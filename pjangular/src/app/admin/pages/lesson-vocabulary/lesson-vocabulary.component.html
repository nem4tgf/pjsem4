<nz-card [nzTitle]="'ðŸ“š Manage Vocabulary for Lesson ' + (lessonId || '')" class="vocab-card">
  <button *ngIf="isAdmin" nz-button nzType="primary" (click)="showAddModal()" class="add-button">
    <i nz-icon nzType="plus-circle"></i> Add Existing Vocabulary
  </button>

  <nz-table
    #basicTable
    [nzData]="lessonVocabularies"
    [nzLoading]="!lessonVocabularies.length"
    [nzFrontPagination]="false"
    class="vocab-table"
  >
    <thead>
      <tr>
        <th class="table-header"><i nz-icon nzType="font-colors"></i> Word</th>
        <th class="table-header"><i nz-icon nzType="bulb"></i> Meaning</th>
        <th class="table-header"><i nz-icon nzType="bar-chart"></i> Difficulty</th>
        <th class="table-header"><i nz-icon nzType="setting"></i> Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let vocab of basicTable.data" class="table-row">
        <td class="table-cell">{{ vocab.word || 'N/A' }}</td>
        <td class="table-cell">{{ vocab.meaning || 'N/A' }}</td>
        <td class="table-cell">{{ vocab.difficultyLevel || 'N/A' }}</td>
        <td class="table-cell actions-cell">
          <a
            *ngIf="isAdmin"
            nz-button
            nzType="link"
            nzDanger
            (click)="vocab.wordId !== undefined && deleteVocabularyFromLesson(vocab.wordId)"
            class="action-button"
          >
            <i nz-icon nzType="delete"></i> Remove
          </a>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <nz-modal
    [(nzVisible)]="isAddModalVisible"
    nzTitle="Add Vocabulary to Lesson"
    (nzOnOk)="handleAddOk()"
    (nzOnCancel)="handleCancel()"
    [nzContent]="addVocabularyModalContent"
    class="modal"
  >
    <ng-template #addVocabularyModalContent>
      <form nz-form [formGroup]="vocabularyForm" class="modal-form">
        <nz-form-item>
          <nz-form-label nzRequired class="modal-label">
            <i nz-icon nzType="font-colors" class="form-icon"></i> Select Vocabulary
          </nz-form-label>
          <nz-form-control
            [nzErrorTip]="vocabularyForm.get('wordId')?.hasError('required') ? 'Please select a vocabulary' : ''"
          >
            <nz-select
              formControlName="wordId"
              nzPlaceHolder="Select an existing vocabulary"
              nzShowSearch
              class="modal-select"
            >
              <nz-option
                *ngFor="let vocab of allVocabularies"
                [nzValue]="vocab.wordId"
                [nzLabel]="vocab.word + ' (' + vocab.meaning + ')'"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </form>
    </ng-template>
  </nz-modal>
</nz-card>
